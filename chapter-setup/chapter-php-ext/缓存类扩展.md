# # Memcache
> 关于Memcache的端口开放请参考「[服务器『必要组建』和『开放端口』](chapter-started/服务器「必要组建」和「开放端口」.md "服务器『必要组建』和『开放端口』")」

## 安装
缓存服务器上安装
```
# 如果可能，执行下面语句安装memcached，基于rpmforge库
$ yum --enablerepo=rpmforge install libevent memcached
```
PHP 服务器上需安装
```
$ yum --enablerepo=remi-php71,remi install php-pecl-memcache php-pecl-memcached
```
验证是否安装成功
```
$ memcached -h
```
## 操作
### 开机自动运行
```
$ chkconfig --level 2345 memcached on
# 7.0
$ systemctl enable memcached.service
```
### 启动
```
$ service memcached start
# 7.0
$ systemctl start memcache.service
```
### 关闭
```
$ service memcached stop
# 7.0
$ systemctl stop memcached.service
```
### 卸载
缓存服务器
```
$ yum remove memcached
```
PHP服务器
```
$ yum remove php-pecl-memcache php-pecl-memcached
```
# # Redis
> 关于Redis的端口开放请参考「[服务器『必要组建』和『开放端口』](chapter-started/服务器「必要组建」和「开放端口」.md "服务器『必要组建』和『开放端口』")」

## 工作目录
```
$ mkdir -m 777 -p /www/database/redis/
$ chown -R redis:redis /www/database/redis/  #此句需要在安装完毕之后执行
```
## 安装
缓存服务器上安装
```
$ yum --enablerepo=remi install redis
```
PHP 服务器 需安装
```
$ yum --enablerepo=remi-php71,remi install php-redis
```
## 配置
```
$ vim /etc/redis.conf
```
```
...
daemonize yes # 后台运行模式
bind client1-lan-ip client2-lan-ip # 注释本行表示接受全部，也可以指定IP，用半角空格分隔
dir /www/database/redis/
appendonly yes
....
```
## 操作
### 开机启动
```
$ chkconfig --level 2345 redis on
# 7.0
$ systemctl enable redis.service

```
### 启动
```
$ service redis start
# 7.0
$ systemctl start redis.service
```
### 停止
```
$ service redis stop
# 7.0
$ systemctl stop redis.service
```
### 卸载
缓存服务器
```
$ yum remove redis
```
PHP 服务器
```
$ yum remove php-redis
```
